--- # ------------------------------------------
# ------------------------------------------
# BrowserSync (https://www.browsersync.io/)
browsersync:
  settings:
    server:
      baseDir: "test/build/"
  watch:
    - "**/*.html"
    - "**/*.php"
    - "public/**/*.php"
    - "public/**/*.twig"
# ------------------------------------------
# Pug (https://pugjs.org)
# ------------------------------------------
pug:
  tasks:
    public:
      src:
        - "assets/views/**/*.pug"
      dst: "build"
      settings:
        data: "pugdata-task.yml"
    private:
      src:
        - "assets/views/**/*.pug"
      dst: "build"
      settings:
        data: "pugdata-task.yml"
  settings:
    data: "pugdata.yml"
# ------------------------------------------
# SASS
# ------------------------------------------
sass:
  tasks:
    public:
      src:
        - "assets/sass/*.scss"
        - "assets/sass/**/*.scss"
      dst: "build/css"
  settings:
    sass:
      errLogToConsole: true
    autoprefixer:
      browsers:
        - "> 1%"
        - "IE >= 9"
    mqpacker:
      sort: "mobile"
    inlineSVG:
      path: "assets/"
    extractMQ: true
    critical: true
# ------------------------------------------
# JavaScript
# ------------------------------------------
javascript:
  tasks:
    public:
      watch:
        - "assets/vendor/**/*.js"
      src:
        - "assets/js/main.js"
      dst: "build/js"
      filename: "all.js"
# ------------------------------------------
# Images
# ------------------------------------------
images:
  tasks:
    public:
      src:
        - "assets/images/**/*.png"
        - "assets/images/**/*.jpg"
        - "assets/images/**/*.jpeg"
        - "assets/images/**/*.gif"
        - "assets/images/**/*.svg"
      dst: "build/images"
      settings:
        optimizationLevel: 4
  settings:
    optimizationLevel: 3
# ------------------------------------------
# Sprites (https://github.com/Ensighten/spritesmith)
# ------------------------------------------
sprites:
  tasks:
    icon:
      src-1x:
        - "assets/sprites/*.png"
        - "assets/sprites/*.jpg"
      src-2x:
        - "assets/sprites/*@2x.png"
        - "assets/sprites/*@2x.jpg"
      dst: "build/images"
      settings:
        sass:
          dst: "assets/sass/helpers"
          rel: "../images"
        prefix: "icon"
  settings:
    imagemin:
      optimizationLevel: 3
# ------------------------------------------
# Fonts (https://www.npmjs.com/package/gulp-iconfont)
# ------------------------------------------
fonts:
  tasks:
    custom:
      src:
        - "assets/svg/*.svg"
      dst: "build/fonts"
      settings:
        sass:
          dst: "assets/sass/fonts"
          rel: "../fonts"
        template: "fontawesome"
        name: "icon"
        prefix: "font"
  settings:
    template: "foundation"
# ------------------------------------------
# SVG Store
# ------------------------------------------
svgstore:
  tasks:
    icons:
      src:
        - "assets/svg/*.svg"
      dst: "build/images"
      filename: "icons.svg"
  settings:
    prefix: "icon"
