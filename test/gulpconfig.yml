# ------------------------------------------
# BrowserSync (https://www.browsersync.io/)
# ------------------------------------------
# settings: override default settings.
# watch   : watch external files and reload
#           browser.
# ------------------------------------------
browsersync:
  settings:
    server:
      baseDir: "test/build/"
  watch:
    - "**/*.html"
    - "**/*.php"
    - "public/**/*.php"
    - "public/**/*.twig"
# ------------------------------------------
# Pug (https://pugjs.org)
# ------------------------------------------
# Template:
# ------------------------------------------
#      public:
#        src:
#          - "public/views/**/*.pug"
#        dst: "public/"
# ------------------------------------------
pug:
  tasks:
    public:
      src:
        - "test/assets/views/**/*.pug"
      dst: "test/build"
      settings:
        data: "test/pugdata-task.yml"
    private:
      src:
        - "test/assets/views/**/*.pug"
      dst: "test/build"
      settings:
        data: "test/pugdata-task.yml"
  settings:
    data: "test/pugdata.yml"
# ------------------------------------------
# SASS
# ------------------------------------------
# Compile SASS files.
# ------------------------------------------
# Template:
# ------------------------------------------
#      public:
#        src:
#          - "public/scss/**/*.scss"
#        dst: "public/css"
# ------------------------------------------
# settings: settings used by SASS during
#           compilation.
# ------------------------------------------
sass:
  tasks:
    public:
      src:
        - "test/assets/sass/**/*.scss"
      dst: "test/build/css"
  settings:
    sass:
      errLogToConsole: true
    autoprefixer:
      browsers:
        - "> 1%"
        - "IE >= 9"
      cascade: false
# ------------------------------------------
# JavaScript
# ------------------------------------------
# Check, concatenate and minify JavaScript
# files.
# ------------------------------------------
# Template:
# ------------------------------------------
#      public:
#        src:
#          - "public/js/seva-designmailer-public.js"
#        dst: "public/js"
#        filename: "all.min.js"
# ------------------------------------------
# jshint_exclude: exclude some files to
#                 jshint check.
# ------------------------------------------
javascript:
  tasks:
    public:
      src:
        - "test/assets/js/*.js"
      dst: "test/build/js"
      filename: "all.js"
# ------------------------------------------
# Images
# ------------------------------------------
# Minify images
# ------------------------------------------
images:
  tasks:
    public:
      src:
        - "test/assets/images/**/*.png"
        - "test/assets/images/**/*.jpg"
        - "test/assets/images/**/*.jpeg"
        - "test/assets/images/**/*.gif"
        - "test/assets/images/**/*.svg"
      dst: "test/build/images"
      settings:
        optimizationLevel: 4
  settings:
    optimizationLevel: 3
# ------------------------------------------
# Sprites (https://github.com/Ensighten/spritesmith)
# ------------------------------------------
# Build sprite sheets.
# ------------------------------------------
# 2 templates: non-retina and retina
# ------------------------------------------
#      icon:
#        src:
#          - "img/sprites/*.png"
#          - "img/sprites/*.jpg"
#        sass:
#          dst: "scss"
#          rel: "../img"
# ------------------------------------------
#      icon:
#        src-1x:
#          - "img/sprites/1x/*.png"
#          - "img/sprites/1x/*.jpg"
#        src-2x:
#          - "img/sprites/2x/*.png"
#          - "img/sprites/2x/*.jpg"
#        dst: "img"
#        sass:
#          dst: "scss"
#          rel: "../img"
# ------------------------------------------
sprites:
  tasks:
    icon:
      src-1x:
        - "test/assets/sprites/*.png"
        - "test/assets/sprites/*.jpg"
      src-2x:
        - "test/assets/sprites/*@2x.png"
        - "test/assets/sprites/*@2x.jpg"
      dst: "test/build/images"
      settings:
        sass:
          dst: "test/assets/sass/helpers"
          rel: "../images"
        prefix: "icon"
  settings:
    imagemin:
      optimizationLevel: 3
# ------------------------------------------
# Fonts (https://www.npmjs.com/package/gulp-iconfont)
# ------------------------------------------
# Build font files with SVG.
# ------------------------------------------
# Template:
# ------------------------------------------
#      custom:
#        src:
#          - "svg/*.svg"
#        dst: "fonts"
#        sass:
#          dst: "scss"
#          rel: "../fonts"
# ------------------------------------------
fonts:
  tasks:
    custom:
      src:
        - "test/assets/svg/*.svg"
      dst: "test/build/fonts"
      settings:
        sass:
          dst: "test/assets/sass/fonts"
          rel: "../fonts"
        template: "fontawesome"
        prefix: "font"
  settings:
    template: "foundation"
